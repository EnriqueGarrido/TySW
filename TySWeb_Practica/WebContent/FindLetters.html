<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Find Pair of Letters - TCG</title>
<link href="css/FindLetters.css" rel="stylesheet">
</head>
<body>
		<div>
			<h1 align="center" class="game-tittle">FIND PAIR OF LETTERS</h1>
		</div>
		<div class="FL_game">
			<p id="Information"></p>
			<div class="FL_State">
				<div class="FL_score">
					<button onclick="LeaveGame()">Leave Game</button>
					<p>Score</p>
					<div class="score">
						<p id="name_opponent"></p>
						<p id="score_opponent" class="score_display">0</p>
					</div>
					<div class="score">
						<p id="name_player"></p>
						<p id="score_player" class="score_display">0</p>
					</div>
				</div>
				<div class="FL_choose">
					<div class="FL_choose">
						<div class="letter">
							<p id="option_letter1" class="score_display"></p>
						</div>
						<div class="letter">
							<p id="option_letter2" class="score_display"></p>
						</div>
						<div class="letter">
							<p id="option_letter3" class="score_display"></p>
						</div>
						<div class="letter">
							<p id="option_letter4" class="score_display"></p>
						</div>
						<div class="letter">
							<p id="option_letter5" class="score_display"></p>
						</div>
						<div class="letter">
							<p id="option_letter6" class="score_display"></p>
						</div>
						<div class="letter">
							<p id="option_letter7" class="score_display"></p>
						</div>
						<div class="letter">
							<p id="option_letter8" class="score_display"></p>
						</div>
						<div class="letter">
							<p id="option_letter9" class="score_display"></p>
						</div>
						<div class="letter">
							<p id="option_letter10" class="score_display"></p>
						</div>
				</div>
				<div class="FL_choose">
					<div class="letter">
						<p id="option_letter11" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter12" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter13" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter14" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter15" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter16" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter17" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter18" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter18" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter20" class="score_display"></p>
					</div>
				</div>
				<div class="FL_choose">
					<div class="letter">
						<p id="option_letter21" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter22" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter23" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter24" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter25" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter26" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter27" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter28" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter29" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter30" class="score_display"></p>
					</div>
				</div>
				<div class="FL_choose">
					<div class="letter">
						<p id="option_letter31" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter32" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter33" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter34" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter35" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter36" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter37" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter38" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter39" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter40" class="score_display"></p>
					</div>
				</div>
				<div class="FL_choose">
					<div class="letter">
						<p id="option_letter41" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter42" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter43" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter44" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter45" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter46" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter47" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter48" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter49" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter50" class="score_display"></p>
					</div>
				</div>
				<div class="FL_choose">
					<div class="letter">
						<p id="option_letter51" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter52" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter53" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter54" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter55" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter56" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter57" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter58" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter59" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter60" class="score_display"></p>
					</div>
				</div>
				<div class="FL_choose">
					<div class="letter">
						<p id="option_letter61" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter62" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter63" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter64" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter65" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter66" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter67" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter68" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter69" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter70" class="score_display"></p>
					</div>
				</div>
				<div class="FL_choose">
					<div class="letter">
						<p id="option_letter71" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter72" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter73" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter74" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter75" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter76" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter77" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter78" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter79" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter80" class="score_display"></p>
					</div>
				</div>
				<div class="FL_choose">
					<div class="letter">
						<p id="option_letter81" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter82" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter83" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter84" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter85" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter86" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter87" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter88" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter89" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter90" class="score_display"></p>
					</div>
				</div>
				<div class="FL_choose">
					<div class="letter">
						<p id="option_letter91" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter92" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter93" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter94" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter95" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter96" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter97" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter98" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter99" class="score_display"></p>
					</div>
					<div class="letter">
						<p id="option_letter100" class="score_display"></p>
					</div>
				</div>
			</div>
		</div>
	</div>

<script>
var gamews = {};
var information = document.getElementById("Information");
var name_opponent = document.getElementById("name_opponent");
var name_player = document.getElementById("name_player");

window.onload = function(){
	createWebsocket();	
}

function createWebsocket(){
	var url = "ws://" + window.location.hostname + ":" + window.location.port + "/TySWeb_Practica/ws_games";
	gamews = new WebSocket(url);
	
	gamews.onopen = function(){
		beginMatch();
	}
	
	gamews.onerror = function(){}
	
	gamews.onclose = function(){}
	
	gamews.onmessage = function(m){
		var data = m.data;
		data = JSON.parse(data);
		
		if(data.TYPE == "MATCH"){
			if(data.currentPlayer == -1){
				information.innerHTML= "PARTIDA COMENZADA";
				name_player.innerHTML=sessionStorage.name;
				
				for (var i in data.players){
					if ((sessionStorage.name)!=(data.players[i].userName)){
						name_opponent.innerHTML= data.players[i].userName;
					}
				}	
			}

		}else if(data.TYPE == "INFORMATIVE"){
				information.innerHTML= data.text;
				name_player.innerHTML=sessionStorage.name;
				name_opponent.innerHTML= "...";
		}
	}
}

window.onbeforeunload = function(){
	gamews.close();
}

function LeaveGame(){
	gamews.close();
	location.href="GameSelection.html";
}

function beginMatch(){
	var begin = {TYPE: "BEGIN_MATCH"}
	gamews.send(JSON.stringify(begin));
}

window.onbeforeunload = function(){
	gamews.close();
}

function EndGame(){
	gamews.close();
	location.href="EndScreen.html";	
}

</script>
	
	

</body>
</html>